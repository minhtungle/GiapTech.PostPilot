@using EDM_DB
@using DocumentFormation.Models;
@using UserType.Models
@{
    string loai = ViewBag.loai;
    List<ChucNangs> kieuNguoiDung_IdChucNang = ViewBag.kieuNguoiDung_IdChucNang;
    List<tbDonViSuDung_PhongLuuTru> PHONGLUUTRUS = Session["PHONGLUUTRUS"] as List<tbDonViSuDung_PhongLuuTru>;
    List<default_tbCheDoSuDung> CHEDOSUDUNGS = Session["CHEDOSUDUNGS"] as List<default_tbCheDoSuDung>;
    List<tbViTriLuuTru> VITRILUUTRUS = Session["VITRILUUTRUS"] as List<tbViTriLuuTru>;
    List<tbDanhMucHoSo> DANHMUCHOSOS = Session["DANHMUCHOSOS"] as List<tbDanhMucHoSo>;
    tbHoSo hoSo = ViewBag.hoSo;
    List<tbHoSo_LichSuExtend> hoSo_LichSus = ViewBag.hoSo_LichSus;
    int hoSo_LichSus_Count = hoSo_LichSus.Count;
    string thoiGianBatDau = hoSo.ThoiGianBatDau == null ? "" : hoSo.ThoiGianBatDau.Value.ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
    string thoiGianKetThuc = hoSo.ThoiGianKetThuc == null ? "" : hoSo.ThoiGianKetThuc.Value.ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
}
<div class="modal-dialog modal-dialog-scrollable modal-full" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title col-md-6 col-sm-12 my-2">
                @(loai == "create" ? "Thêm mới" : loai == "update" ? "Cập nhật" : "Xem chi tiết")
                <a class="text-warning c-poiter p-1" data-bs-toggle="tooltip" data-bs-placement="right" title="Nhấn xem hướng dẫn"
                   data-hint="Nhấn xem hướng dẫn" data-hint-position="top-left"
                   onclick="huongDanSuDung.kichHoat('hoso-themmoi')"><i class="bi bi-lightbulb fs-6"></i></a>
            </h5>
            <div class="list-group list-group-horizontal mb-1 text-center col-md-6 col-sm-12 justify-content-sm-end justify-content-center" id="" role="tablist">
                <a class="list-group-item list-group-item-action active" id="thongtin-list"
                   data-bs-toggle="list" href="#thongtin" role="tab">Thông tin hồ sơ</a>
                @if (loai != "create")
                {
                    <a class="list-group-item list-group-item-action" id="lichsuhoso-list"
                       data-bs-toggle="list" href="#lichsuhoso" role="tab">Lịch sử thao tác</a>
                }
            </div>
        </div>
        <div class="modal-body">
            <div class="tab-content text-justify">
                <div class="tab-pane fade show active" id="thongtin" role="tabpanel"
                     aria-labelledby="thongtin-list">
                    <div class="row" intro-container="thongtin-thieu">
                        <!--Lưu ý-->
                        @if (kieuNguoiDung_IdChucNang.FirstOrDefault(x => x.ChucNang.MaChucNang == "StorageLocation") != null)
                        {<div class="col-sm-12 col-md-4">
                                <span class="fst-italic">
                                    <a href="~/StorageLocation/Index">➡️ Nhấn vào đây để tạo <span class="font-bold text-danger">[Vị trí lưu trữ]</span></a><br />
                                </span>
                            </div>
                        }
                        @if (kieuNguoiDung_IdChucNang.FirstOrDefault(x => x.ChucNang.MaChucNang == "DocumentDirectory") != null)
                        {<div class="col-sm-12 col-md-4">
                                <span class="fst-italic">
                                    <a href="~/DocumentDirectory/Index">➡️ Nhấn vào đây để tạo <span class="font-bold text-danger">[Danh mục hồ sơ]</span></a>
                                </span>
                            </div>
                        }
                        @if (kieuNguoiDung_IdChucNang.FirstOrDefault(x => x.ChucNang.MaChucNang == "UnitManage") != null)
                        {<div class="col-sm-12 col-md-4">
                                <span class="fst-italic">
                                    <a href="~/UnitManage/Index">➡️ Nhấn vào đây để tạo <span class="font-bold text-danger">[Phông lưu trữ]</span></a><br />
                                </span>
                            </div>
                        }
                    </div>
                    <div class="row" intro-container="thongtin-chung">
                        <!--Id-->
                        <input id="input-idhoso" value="@hoSo.IdHoSo" hidden />
                        <input id="input-quyentruycap" value="@hoSo.QuyenTruyCap" hidden />
                        <div class="col-12 border-1">
                            <div class="divider divider-left">
                                <div class="divider-text text-uppercase">
                                    <i class="bi bi-caret-right-fill"></i> Thông tin chung
                                </div>
                            </div>
                            <div class="row">
                                <!--Tiêu đề hồ sơ-->
                                <div class="col-12 col-sm-12 col-md-12" intro-container="thongtin-batbuoc">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="input-tieudehoso">Tiêu đề hồ sơ</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="Nhập thông tin ..."
                                                       id="input-tieudehoso" name="input-tieudehoso"
                                                       value="@(hoSo.TieuDeHoSo ?? "")" @(loai == "read" ? "disabled" : "") required>
                                                <button type="button" class="input-group-text"
                                                        onclick="df.displayModal_ThietLapQuyen('#input-quyentruycap')" intro-container="thongtin-thietlapquyen">
                                                    <i class="bi bi-shield-lock-fill"></i>
                                                    <span class="d-none d-sm-block">&nbsp;Thiết lập quyền</span>
                                                </button>
                                            </div>
                                            <div class="invalid-feedback feedback" for="input-tieudehoso">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                                <!--Vị trí lưu trữ-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="select-vitriluutru">Vị trí lưu trữ</label>
                                            <select class="form-control form-select2"
                                                    id="select-vitriluutru" name="select-vitriluutru"
                                                    @(loai == "read" ? "disabled" : "") required>
                                                <option disabled data-ma="" @(VITRILUUTRUS.Count > 0 ? "" : "selected")>Chọn thông tin</option>
                                                @foreach (tbViTriLuuTru viTri in VITRILUUTRUS)
                                                {
                                                    <option style="white-space: pre!important" value="@viTri.IdViTriLuuTru" @(viTri.IdViTriLuuTru == hoSo.IdViTriLuuTru ? "selected" : "")>@viTri.TenViTriLuuTru</option>
                                                }
                                            </select>
                                            <div class="invalid-feedback feedback" for="select-vitriluutru">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                                <!--Danh mục hồ sơ-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="select-danhmuchoso">Danh mục hồ sơ</label>
                                            <select class="form-control form-select2"
                                                    id="select-danhmuchoso" name="select-danhmuchoso"
                                                    @(loai == "read" ? "disabled" : "") required>
                                                <option disabled data-ma="" @(DANHMUCHOSOS.Count > 0 ? "" : "selected")>Chọn thông tin</option>
                                                @foreach (tbDanhMucHoSo danhMuc in DANHMUCHOSOS)
                                                {
                                                    <option style="white-space: pre!important" value="@danhMuc.IdDanhMucHoSo" @(danhMuc.IdDanhMucHoSo == hoSo.IdDanhMucHoSo ? "selected" : "")>@danhMuc.TenDanhMucHoSo</option>
                                                }
                                            </select>
                                            <div class="invalid-feedback feedback" for="select-danhmuchoso">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                                <!--Phông lưu trữ-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="select-phongluutru">Phông lưu trữ</label>
                                            <select class="form-control form-select2"
                                                    id="select-phongluutru" name="select-phongluutru"
                                                    @(loai == "read" ? "disabled" : "") required>
                                                <option disabled data-ma="" @(PHONGLUUTRUS.Count > 0 ? "" : "selected")>Chọn thông tin</option>
                                                @foreach (tbDonViSuDung_PhongLuuTru phong in PHONGLUUTRUS)
                                                {
                                                    <option value="@phong.IdPhongLuuTru" @(phong.IdPhongLuuTru == hoSo.IdPhongLuuTru ? "selected" : "")>@phong.TenPhongLuuTru</option>
                                                }
                                            </select>
                                            <div class="invalid-feedback feedback" for="select-phongluutru">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--##-->
                        <div class="col-12 border-1">
                            <div class="divider divider-left">
                                <div class="divider-text text-uppercase">
                                    <i class="bi bi-caret-right-fill"></i> Mã hồ sơ
                                </div>
                            </div>
                            <div class="row">
                                <!--Mục lục số hoặc năm hình thành hồ sơ-->
                                <div class="col-12 col-sm-12 col-md-6">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="input-muclucso">Mục lục số/Năm hình thành</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..."
                                                   id="input-muclucso" name="input-muclucso"
                                                   value="@(hoSo.MucLucSo_NamHinhThanh ?? "")" @(loai == "read" ? "disabled" : "") required>
                                            <div class="invalid-feedback feedback" for="input-muclucso">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                                <!--Số và ký hiệu hồ sơ-->
                                <div class="col-12 col-sm-12 col-md-6">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="input-sokyhieu">Số/Ký hiệu hồ sơ</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..."
                                                   id="input-sokyhieu" name="input-sokyhieu"
                                                   value="@(hoSo.So_KyHieu ?? "")" @(loai == "read" ? "disabled" : "") required>
                                            <div class="invalid-feedback feedback" for="input-sokyhieu">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                                <!--Mã hồ sơ-->
                                <div class="col-12 col-sm-12 col-md-12">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="input-mahoso">Mã hồ sơ</label>
                                            <input type="text" class="form-control text-primary" placeholder="Nhập thông tin ..."
                                                   id="input-mahoso" name="input-mahoso" onchange="df.hoSo.createMaHoSo(this)"
                                                   value="@(hoSo.MaHoSo ?? "")" @(loai == "read" ? "disabled" : "") required>
                                            <div class="invalid-feedback feedback" for="input-mahoso">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 border-1">
                            <div class="divider divider-left">
                                <div class="divider-text text-uppercase">
                                    <i class="bi bi-caret-right-fill"></i> Thông tin khác
                                </div>
                            </div>
                            <div class="row">
                                <!--Thời hạn bảo quản-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-thoihanbaoquan">Thời hạn bảo quản</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..." id="input-thoihanbaoquan" value="@(hoSo.ThoiHanBaoQuan ?? "")" @(hoSo.ThoiHanBaoQuan == "Vĩnh viễn" ? "disabled" : "") @(loai == "read" ? "disabled" : "")>
                                            <input type="checkbox" class="form-check-input" id="checkbox-thoihanbaoquan" style="position: absolute; z-index: 1; right: .6rem; top: 2rem;" @(hoSo.ThoiHanBaoQuan == "Vĩnh viễn" ? "checked" : "") onchange="df.chonThoiHanBaoQuan(this, $('#input-thoihanbaoquan'))" @(loai == "read" ? "disabled" : "") />
                                        </div>
                                    </div>
                                </div>
                                <!--Thời gian bắt đầu-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-thoigianbatdau">Thời gian bắt đầu</label>
                                            <input type="date" class="form-control" placeholder="Nhập thông tin ..." id="input-thoigianbatdau" value="@thoiGianBatDau" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Thời gian kết thúc-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-thoigianketthuc">Thời gian kết thúc</label>
                                            <input type="date" class="form-control" placeholder="Nhập thông tin ..." id="input-thoigianketthuc" value="@thoiGianKetThuc" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Chế độ sử dụng-->
                                <div class="col-12 col-sm-12 col-md-6">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label class="required" for="select-chedosudung">Chế độ sử dụng</label>
                                            <select class="form-control"
                                                    id="select-chedosudung" name="select-chedosudung"
                                                    @(loai == "read" ? "disabled" : "") required>
                                                <option disabled @(CHEDOSUDUNGS.Count > 0 ? "" : "selected")>Chọn thông tin</option>
                                                @foreach (default_tbCheDoSuDung cheDo in CHEDOSUDUNGS)
                                                {
                                                    <option value="@cheDo.IdCheDoSuDung" @(cheDo.IdCheDoSuDung == hoSo.IdCheDoSuDung ? "selected" : "")>@cheDo.TenCheDoSuDung</option>
                                                }
                                            </select>
                                            <div class="invalid-feedback feedback" for="select-chedosudung">Không được để trống</div>
                                        </div>
                                    </div>
                                </div>
                                <!--Tình trạng vật lý-->
                                <div class="col-12 col-sm-12 col-md-6">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-tinhtrangvatly">Tình trạng vật lý</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..." id="input-tinhtrangvatly" value="@(hoSo.TinhTrangVatLy ?? "")" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Ngôn ngữ-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-ngonngu">Ngôn ngữ</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..." id="input-ngonngu" value="@(hoSo.NgonNgu ?? "")" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Từ khóa-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-tukhoa">Từ khóa</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..." id="input-tukhoa" value="@(hoSo.TuKhoa ?? "")" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Ký hiệu thông tin-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-kyhieuthongtin">Ký hiệu thông tin</label>
                                            <input type="text" class="form-control" placeholder="Nhập thông tin ..." id="input-kyhieuthongtin" value="@(hoSo.KyHieuThongTin ?? "")" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Tổng số văn bản trong hồ sơ-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-tongsovanban">Tổng số văn bản trong hồ sơ</label>
                                            <input type="number" class="form-control" placeholder="Nhập thông tin ..." id="input-tongsovanban" value="@(hoSo.TongSoVanBan ?? 0)" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Số lượng tờ-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-soluongtu">Số lượng tờ</label>
                                            <input type="number" class="form-control" placeholder="Nhập thông tin ..." id="input-soluongto" value="@(hoSo.SoLuongTo ?? 0)" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Số lượng trang-->
                                <div class="col-12 col-sm-12 col-md-4">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-soluongtrang">Số lượng trang</label>
                                            <input type="number" class="form-control" placeholder="Nhập thông tin ..." id="input-soluongtrang" value="@(hoSo.SoLuongTrang ?? 0)" @(loai == "read" ? "disabled" : "")>
                                        </div>
                                    </div>
                                </div>
                                <!--Ghi chú-->
                                <div class="col-12 col-sm-12 col-md-12">
                                    <div class="position-relative">
                                        <div class="form-group mb-3">
                                            <label for="input-ghichu">Ghi chú</label>
                                            <textarea class="form-control min-h-100 max-h-200" id="input-ghichu" rows="3" @(loai == "read" ? "disabled" : "")>@(hoSo.GhiChu ?? "")</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @if (loai != "create")
                {
                    <div class="tab-pane fade" id="lichsuhoso" role="tabpanel"
                         aria-labelledby="lichsuhoso-list">
                        <div class="row" id="lichsu-getList-container">
                            <div class="@(hoSo_LichSus_Count == 0 ? "col-12": "col-sm-12 col-md-6")">
                                <table class="table table-hover table-bordered w-100 nowrap" id="lichsu-getList" data-page-length="10">
                                    <thead>
                                        <tr>
                                            <th class="text-center" style="min-width: 10rem!important">Nội dung</th>
                                            <th class="text-center" style="min-width: 10rem!important">Người thao tác</th>
                                            <th class="text-center" style="min-width: 10rem!important">Ngày thao tác</th>
                                        </tr>
                                    </thead>
                                    <tfoot class="show-footer-above">
                                        <tr>
                                            <th><input type="text" class="form-control dt-search-col" placeholder="Tìm kiếm ..." /></th>
                                            <th><input type="text" class="form-control dt-search-col" placeholder="Tìm kiếm ..." /></th>
                                            <th><input type="text" class="form-control dt-search-col" placeholder="Tìm kiếm ..." /></th>
                                        </tr>
                                    </tfoot>
                                    <tbody>
                                        @for (int i = 0; i < hoSo_LichSus_Count; i++)
                                        {
                                            tbHoSo_LichSuExtend hoSo_LichSu = hoSo_LichSus[i];
                                            string ngayTao = hoSo_LichSu.NgayTao == null ? "" : hoSo_LichSu.NgayTao.Value.ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                            <tr row="@i" onclick="df.hoSo_lichSu.readRow(this)">
                                                <!--Nội dung-->
                                                <td class="" style="vertical-align: top;">
                                                    <span data-tentruong="NoiDung">@hoSo_LichSu.NoiDung</span>
                                                </td>
                                                <!--Người thao tác-->
                                                <td class="" style="vertical-align: top;">
                                                    <span data-tentruong="NguoiThaoTac">@hoSo_LichSu.ThongTinNguoiTao.TenNguoiDung</span>
                                                </td>
                                                <!--Ngày thao tác-->
                                                <td class="" style="vertical-align: top;">
                                                    <span data-tentruong="NgayThaoTac">@ngayTao</span>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                            @if (hoSo_LichSus_Count > 0)
                            {
                                <div class="col-sm-12 col-md-6" id="lichsu-read-container" style="overflow-y: scroll; border: 1px solid #d3d3d35c;">
                                    @for (int i = 0; i < hoSo_LichSus_Count; i++)
                                    {
                                        <div class="row lichsu-read" row="@i">
                                            <div class="col-12 border-1">
                                                <div class="divider divider-left">
                                                    <div class="divider-text text-uppercase">
                                                        <i class="bi bi-caret-right-fill"></i> Thông tin thay đổi
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    @{
                                                        tbHoSo_LichSuExtend hoSo_LichSu = hoSo_LichSus[i];
                                                        if (hoSo_LichSu.ChiTiet == "" || hoSo_LichSu.ChiTiet == null)
                                                        {
                                                            <div class="col-12 col-sm-12 col-md-12">
                                                                <p class="">Không có thay đổi trước đó</p>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            List<HoSo_LichSu_ChiTiet> chiTiets = Newtonsoft.Json.JsonConvert.DeserializeObject<List<HoSo_LichSu_ChiTiet>>(hoSo_LichSu.ChiTiet);
                                                            //string thoiGianBatDau = hoSo_LichSu.ThoiGianBatDau == null ? "" : hoSo_LichSu.ThoiGianBatDau.Value.ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                                            //string thoiGianKetThuc = hoSo_LichSu.ThoiGianKetThuc == null ? "" : hoSo_LichSu.ThoiGianKetThuc.Value.ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                                            <div class="col-12 col-sm-12 col-md-12">
                                                                <table class="table table-bordered" style="border: 1px solid black;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="text-center" style="text-align: center !important; border: 1px solid black;">Trường dữ liệu</th>
                                                                            <th class="text-center" style="text-align: center !important; border: 1px solid black;">Thông tin cũ</th>
                                                                            <th class="text-center" style="text-align: center !important; border: 1px solid black;">Thông tin mới</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        @if (chiTiets.Count == 0)
                                                                        {
                                                                            <tr>
                                                                                <td colspan="3" class="text-danger fst-italic" style="text-align: center !important; border: 1px solid black;">Không có thay đổi</td>
                                                                            </tr>
                                                                        }
                                                                        else
                                                                        {
                                                                            foreach (HoSo_LichSu_ChiTiet chiTiet in chiTiets)
                                                                            {
                                                                                if (chiTiet.TenTruongDuLieu == "TieuDeHoSo")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Tiêu đề hồ sơ";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "MaHoSo")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Mã hồ sơ";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "ThoiHanBaoQuan")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Thời hạn bảo quản";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "ThoiGianBatDau")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Thời gian bắt đầu";
                                                                                    chiTiet.GiaTri_Cu = chiTiet.GiaTri_Cu == "" ? "" : chiTiet.GiaTri_Cu.AsDateTime().ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                                                                    chiTiet.GiaTri_Moi = chiTiet.GiaTri_Moi == "" ? "" : chiTiet.GiaTri_Moi.AsDateTime().ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "ThoiGianKetThuc")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Thời gian kết thúc";
                                                                                    chiTiet.GiaTri_Cu = chiTiet.GiaTri_Cu == "" ? "" : chiTiet.GiaTri_Cu.AsDateTime().ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                                                                    chiTiet.GiaTri_Moi = chiTiet.GiaTri_Moi == "" ? "" : chiTiet.GiaTri_Moi.AsDateTime().ToString("yyyy-MM-dd", System.Globalization.CultureInfo.InvariantCulture);
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "TinhTrangVatLy")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Tình trạng vật lý";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "NgonNgu")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Ngôn ngữ";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "TuKhoa")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Từ khóa";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "KyHieuThongTin")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Ký hiệu thông tin";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "TongSoVanBan")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Tổng số văn bản";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "SoLuongTo")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Số lượng tờ";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "SoLuongTrang")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Số lượng trang";
                                                                                }
                                                                                else if (chiTiet.TenTruongDuLieu == "GhiChu")
                                                                                {
                                                                                    chiTiet.TenTruongDuLieu = "Ghi chú";
                                                                                }
                                                                                <tr>
                                                                                    <td style="text-align: center !important; border: 1px solid black;">@chiTiet.TenTruongDuLieu</td>
                                                                                    <td style="text-align: center !important; border: 1px solid black;">@chiTiet.GiaTri_Cu</td>
                                                                                    <td style="text-align: center !important; border: 1px solid black;">@chiTiet.GiaTri_Moi</td>
                                                                                </tr>
                                                                            }
                                                                        }
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        }
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>

        </div>
        <div class="modal-footer">
            @if (loai != "read")
            {
                <button type="button" class="btn btn-primary ml-1" onclick="df.hoSo.save(@("'" + loai + "'"))">
                    <span class="">Lưu</span>
                </button>
            }
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                <span class="">Đóng</span>
            </button>
        </div>
    </div>
</div>